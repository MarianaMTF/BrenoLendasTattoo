<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breno Lendas - Studio de Tatuagem</title>
    <link rel="stylesheet" href="/css/style.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="pagina-layout">
        <header>
            <div class="conteudo">
                <div class="cabecalho-esquerdo">
                    <img src="/Ilustração_Sem_Título_page-0001.jpg" alt="Logo" class="cabecalho-logo">
                </div>
                <nav class="navegacao-principal">
                    <a th:href="@{/produto/admin-catalogo}">Catalogo</a>
                    <a th:href="@{/orcamentos/admin-orcamentos}">Orçamentos</a>
                    <a th:href="@{/artista/admin-artistas}" class="ativo">Artistas</a>
                    <a th:href="@{/cliente/minha-conta}">Minha Conta</a>
                    <a th:href="@{/auth/login}">Sair</a>
                </nav>
            </div>
        </header>

        <main class="container">
            <div class="cabecalho-pagina">
                <h1>Novo Artista</h1>
            </div>

            <!-- ENDPOINT: th:action="@{/artista/register}" - Aqui você deve colocar seu endpoint de cadastro -->
            <form class="formulario" th:action="@{/admin/artista/novo}" method="post" enctype="multipart/form-data"
                th:object="${artista}">
                
                <div class="secao-formulario">
                    <h2>Foto do Artista</h2>
                    <div class="enviar-imagem">
                        <input type="file" id="artista-image" accept="image/*" class="enviar-arquivo"
                            th:field="*{foto}" required>
                        <label for="artista-image" class="nome-arquivo">
                            <div class="icone-upload">+</div>
                            <span>Adicionar foto do artista</span>
                            <p class="dica">Clique para selecionar</p>
                        </label>
                        <div class="visualizacao" style="display: none;">
                            <img src="" alt="Preview" id="image-preview">
                            <button type="button" class="botao-remover-imagem">×</button>
                        </div>
                    </div>
                </div>

                <div class="secao-formulario">
                    <h2>Dados Pessoais</h2>

                    <div class="formulario-dados">
                        <label for="nome-completo">Nome Completo:</label>
                        <input type="text" id="nome-completo" th:field="*{nomeCompleto}" placeholder="Nome completo do artista" required>
                    </div>

                    <div class="formulario-dados">
                        <label for="nome-artistico">Nome Artístico:</label>
                        <input type="text" id="nome-artistico" th:field="*{nomeArtistico}" placeholder="Nome artístico/profissional" required>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="email">Email:</label>
                                <input type="email" id="email" th:field="*{email}" placeholder="email@exemplo.com" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="telefone">Telefone:</label>
                                <input type="tel" id="telefone" th:field="*{telefone}" placeholder="(11) 99999-9999" required>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="data-nascimento">Data de Nascimento:</label>
                                <input type="date" id="data-nascimento" th:field="*{dataNascimento}" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="cpf">CPF:</label>
                                <input type="text" id="cpf" th:field="*{cpf}" placeholder="000.000.000-00" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="secao-formulario">
                    <h2>Informações Profissionais</h2>

                    <div class="formulario-dados">
                        <label for="especialidades">Especialidades:</label>
                        <div class="especialidades-container">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="Realismo" id="realismo" name="especialidades">
                                <label class="form-check-label" for="realismo">Realismo</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="Old School" id="oldschool" name="especialidades">
                                <label class="form-check-label" for="oldschool">Old School</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="New School" id="newschool" name="especialidades">
                                <label class="form-check-label" for="newschool">New School</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="Blackwork" id="blackwork" name="especialidades">
                                <label class="form-check-label" for="blackwork">Blackwork</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="Aquarela" id="aquarela" name="especialidades">
                                <label class="form-check-label" for="aquarela">Aquarela</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="Minimalista" id="minimalista" name="especialidades">
                                <label class="form-check-label" for="minimalista">Minimalista</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="Tribal" id="tribal" name="especialidades">
                                <label class="form-check-label" for="tribal">Tribal</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="Japonês" id="japones" name="especialidades">
                                <label class="form-check-label" for="japones">Japonês</label>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="experiencia">Anos de Experiência:</label>
                                <input type="number" id="experiencia" th:field="*{anosExperiencia}" placeholder="Ex: 5" min="0" max="50" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="valor-hora">Valor por Hora (R$):</label>
                                <input type="number" id="valor-hora" th:field="*{valorHora}" placeholder="Ex: 150" min="0" step="0.01" required>
                            </div>
                        </div>
                    </div>

                    <div class="formulario-dados">
                        <label for="biografia">Biografia/Descrição:</label>
                        <textarea id="biografia" th:field="*{biografia}" rows="4"
                            placeholder="Conte um pouco sobre a trajetória do artista, estilo, inspirações..."
                            required></textarea>
                    </div>
                </div>

                <div class="secao-formulario">
                    <h2>Redes Sociais</h2>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="instagram">Instagram:</label>
                                <input type="text" id="instagram" th:field="*{instagram}" placeholder="@usuario_instagram">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="facebook">Facebook:</label>
                                <input type="text" id="facebook" th:field="*{facebook}" placeholder="facebook.com/usuario">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="portfolio">Site/Portfólio:</label>
                                <input type="url" id="portfolio" th:field="*{portfolio}" placeholder="https://meuportfolio.com">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="formulario-dados">
                                <label for="whatsapp">WhatsApp:</label>
                                <input type="tel" id="whatsapp" th:field="*{whatsapp}" placeholder="(11) 99999-9999">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="secao-formulario">
                    <h2>Status</h2>
                    <div class="formulario-dados">
                        <label for="status">Status do Artista:</label>
                        <select id="status" th:field="*{status}" class="form-select" required>
                            <option value="">Selecione o status</option>
                            <option value="ATIVO">Ativo</option>
                            <option value="INATIVO">Inativo</option>
                            <option value="FERIAS">Férias</option>
                            <option value="LICENCA">Licença</option>
                        </select>
                    </div>
                </div>

                <div class="botoes-acao">
                    <button type="button" class="botao-secundario">
                        <a th:href="@{/artista/admin-artistas}">Cancelar</a>
                    </button>
                    <button type="submit" class="botao-primario">Cadastrar Artista</button>
                </div>
            </form>
        </main>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Preview da imagem
            const inputFile = document.getElementById('artista-image');
            const imagePreview = document.getElementById('image-preview');
            const visualizacao = document.querySelector('.visualizacao');
            const botaoRemover = document.querySelector('.botao-remover-imagem');

            inputFile.addEventListener('change', function () {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        imagePreview.src = e.target.result;
                        visualizacao.style.display = 'flex';
                    };
                    reader.readAsDataURL(file);
                }
            });

            botaoRemover.addEventListener('click', function () {
                inputFile.value = '';
                imagePreview.src = '';
                visualizacao.style.display = 'none';
            });

            // Máscara para telefone
            const telefoneInput = document.getElementById('telefone');
            const whatsappInput = document.getElementById('whatsapp');
            
            function aplicarMascaraTelefone(input) {
                input.addEventListener('input', function (e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length <= 11) {
                        value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
                        if (value.length < 14) {
                            value = value.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
                        }
                    }
                    e.target.value = value;
                });
            }

            aplicarMascaraTelefone(telefoneInput);
            aplicarMascaraTelefone(whatsappInput);

            // Máscara para CPF
            const cpfInput = document.getElementById('cpf');
            cpfInput.addEventListener('input', function (e) {
                let value = e.target.value.replace(/\D/g, '');
                value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
                e.target.value = value;
            });

            // Validação do formulário
            const form = document.querySelector('.formulario');
            form.addEventListener('submit', function (e) {
                const especialidades = document.querySelectorAll('input[name="especialidades"]:checked');
                if (especialidades.length === 0) {
                    e.preventDefault();
                    alert('Por favor, selecione pelo menos uma especialidade.');
                    return false;
                }

                // Validação de email
                const email = document.getElementById('email').value;
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    e.preventDefault();
                    alert('Por favor, insira um email válido.');
                    return false;
                }

                // Validação de CPF básica
                const cpf = document.getElementById('cpf').value.replace(/\D/g, '');
                if (cpf.length !== 11) {
                    e.preventDefault();
                    alert('Por favor, insira um CPF válido.');
                    return false;
                }
            });
        });
    </script>

    <style>
        .especialidades-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .form-check {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-check-input {
            margin: 0;
        }

        .form-check-label {
            margin: 0;
            cursor: pointer;
        }

        .row {
            display: flex;
            gap: 20px;
            margin-bottom: 0;
        }

        .col-md-6 {
            flex: 1;
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background-color: white;
        }

        .form-select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        @media (max-width: 768px) {
            .row {
                flex-direction: column;
                gap: 0;
            }
            
            .especialidades-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>

</html>